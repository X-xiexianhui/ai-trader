# 防过拟合策略配置文件

# 早停机制
early_stopping:
  enabled: true
  patience: 10              # 容忍的epoch数
  min_delta: 0.0001        # 最小改善幅度
  mode: 'min'              # 'min'表示指标越小越好，'max'表示越大越好
  save_path: 'models/best_model.pt'  # 最佳模型保存路径

# 梯度裁剪
gradient_clipping:
  enabled: true
  max_norm: 1.0            # 最大梯度范数
  norm_type: 2.0           # 范数类型
  method: 'norm'           # 裁剪方法: 'norm' 或 'value'

# Dropout正则化
dropout:
  enabled: true
  rate: 0.1                # Dropout率
  schedule:
    enabled: false         # 是否使用Dropout调度
    initial: 0.1           # 初始Dropout率
    final: 0.3             # 最终Dropout率
    warmup_epochs: 10      # 预热epoch数

# 权重衰减（L2正则化）
weight_decay:
  enabled: true
  value: 0.0001            # 权重衰减系数
  schedule:
    enabled: false         # 是否使用权重衰减调度
    initial: 0.0001        # 初始权重衰减
    final: 0.001           # 最终权重衰减
    warmup_epochs: 10      # 预热epoch数

# Mixup数据增强
mixup:
  enabled: false           # 是否启用Mixup
  alpha: 0.2               # Beta分布参数

# 标签平滑
label_smoothing:
  enabled: false           # 是否启用标签平滑
  smoothing: 0.1           # 平滑系数

# 数据增强
data_augmentation:
  enabled: true
  methods:
    - jittering:           # 添加噪声
        enabled: true
        sigma: 0.01
    - scaling:             # 幅度缩放
        enabled: true
        sigma: 0.1
    - time_warping:        # 时间扭曲
        enabled: false
        sigma: 0.2

# 模型集成
ensemble:
  enabled: false           # 是否启用集成
  method: 'average'        # 集成方法: 'average', 'weighted', 'voting'
  n_models: 5              # 模型数量
  bootstrap:
    enabled: false         # 是否使用Bootstrap
    sample_ratio: 0.8      # 采样比例
  snapshot:
    enabled: false         # 是否使用快照集成
    cycle_length: 10       # 循环长度

# 交叉验证
cross_validation:
  enabled: false           # 是否启用交叉验证
  method: 'time_series'    # 方法: 'time_series', 'walk_forward', 'expanding'
  n_splits: 5              # 分割数
  test_size: null          # 测试集大小（null表示自动计算）
  gap: 0                   # 训练集和测试集之间的间隔

# Walk-Forward验证
walk_forward:
  enabled: false           # 是否启用Walk-Forward验证
  train_period: 500        # 训练周期长度
  test_period: 100         # 测试周期长度
  step_size: 100           # 步长
  gap: 0                   # 间隔

# 特征选择
feature_selection:
  enabled: false           # 是否启用特征选择
  method: 'importance'     # 方法: 'importance', 'rfe', 'correlation'
  n_features: 20           # 选择的特征数量
  threshold: 0.01          # 重要性阈值

# PCA降维
pca:
  enabled: false           # 是否启用PCA
  n_components: null       # 主成分数量（null表示自动）
  variance_ratio: 0.95     # 保留的方差比例

# 监控和日志
monitoring:
  log_interval: 10         # 日志记录间隔（epoch）
  save_interval: 50        # 模型保存间隔（epoch）
  plot_training: true      # 是否绘制训练曲线
  track_gradients: true    # 是否跟踪梯度
  track_weights: false     # 是否跟踪权重分布